function no_return() {
    $n = 0;
}

$a = [[], "", .0, 0, false, null, no_return(), $z];

for ($i = count($a) - 1; $i >= 0 ; $i--) {
    print(type($a[$i]) . ": ");
    if ($a[$i]) print("true" . LX_EOL);
    else print("false" . LX_EOL);
}

$a = [.0, 1.5, -2., 1e3];

for ($i = 0; $i < count($a); $i++)
    print(type($a[$i]) . LX_EOL);

print(ord(chr(-5)).LX_EOL);
print(chr(65).LX_EOL);
print(ord(chr(300)).LX_EOL);
print("\x41\n");

printf("Integer: %03d\n", -1);

$a = "Hello";
$b = "World";
print($a . " " . $b . "\n"); // Prints Hello World

printf("%s %s\n", $a, $b); // Prints Hello World

print(type(LX_VERSION) . LX_EOL);
print(LX_VERSION . LX_EOL);

$a = ["x" => 10, "y" => 20, 3 => "z"];
$k = keys($a);
for ($i = 0; $i < count($k); $i++) print($k[$i] . ": " . $a[$k[$i]] . "\n");

print(count("abc") . LX_EOL);
print(strlen([0,1,2]) . LX_EOL);

printf("%08d\n", 12);
printf("%.2f\n", 3.14159);
printf("%c\n", "A");
printf("%c\n", "AB");
printf("%c\n", "");
printf("%c\n", 0);
printf("%c\n", 65);


function f() {
    $v += 1;
    print("v:" . $v . "\n");
}

f();
print($v . "\n"); // undefined


function caca() {}



$a["nested"]["y"] = 30;

print (((1 + 2) * 2) + $a["nested"]["y"] . "\n");

$a = keys($a["nested"]);
for ($i = 0; $i < count($a) ; $i++) print($a[$i] . "\n");

print ("-------\n");

$a["nested"]["y"] = 30;
print ($a["nested"][keys($a["nested"])[0]] . "\n");


$a = 0;
$a != 0 && print("never printed\n");
$a == 0 || print("never printed\n");

print(lxinfo());



var_dump(abs(-4.2));
var_dump(abs(5));
var_dump(abs(-5));

var_dump(acos(.5));

var_dump(asin(.5));

print(asin(0) . "\n");
print("---\n");
print(1.0); print(LX_EOL);
var_dump(1.0);
print(0.0); print(LX_EOL);
var_dump(0.0);
print(-0.2); print(LX_EOL);
var_dump(-.2);
printf("%.2f\n", -.1);
var_dump(float("3.14"));
print(file_size("README.md") . "\n");
var_dump(int("42"));
/*for ($i = 0; $i < 100; $i++) {
    print((rand(0, 10)) . "\n");
}*/
print((rand(0, 10)) . "\n");
print("---\n");
print(join(";", ";") . "\n");
print("---\n");
print(json_encode(["a" => 1, "b" => 2.1, "c" => "banana"]) . LX_EOL);
$path = "./";
$files = list_dir($path);
foreach($files as $file) {
    if (is_dir($path . $file)) print("directory: " . $file . LX_EOL);
    else print("file: " . $file . LX_EOL);
}
print(lxinfo());
print(key_exists("b", ["a" => 10, "b" => 20]) . "\n");

$a = [1, 2, 3];
var_dump(pop($a));
var_dump($a);
print("Hello", " ", "world", LX_EOL);

$str = serialize([1, 2]);
print($str . LX_EOL);
$a = unserialize($str);
var_dump($a);
$s = sprintf("The result is: %.2f", 1.234);
print($s . "\n");

var_dump(str(123));

var_dump(values(["a" => 10, "b" => 20]));
$filename = "temp.txt";
file_put_contents($filename, "Temporary data");
if (file_exists($filename)) {
    print("Removing existing temporary file.\n");
    if (unlink($filename)) print ("File ", $filename, " removed succesfully.\n");
    else print("An unexpected problem prevented the file ", $filename, " from being deleted.\n");
}

print(ucfirst("hello world!") . "\n");
var_dump(unserialize("a:0:{}"));

$b = 1;

if ($b == 0) {
    print("one\n");
} else if ($b == 2) {
    print("two\n");
} else {
    print("other\n");
}

function add(a, b) {
    return $a + $b;
}

print(add(1, 100), LX_EOL);
print("---\n");
$fruits = ["lemon", "orange", "banana", "apple"];
sort($fruits);
foreach ($fruits as $key => $val) {
    print("fruits[" . $key . "] = " . $val . "\n");
}
print("---\n");
$fruits = ["lemon", "orange", "banana", "apple"];
rsort($fruits);
foreach ($fruits as $key => $val) {
    print($key, " = ", $val, "\n");
}
print("---\n");
$fruits = ["d"=>"lemon", "a"=>"orange", "b"=>"banana", "c"=>"apple"];
ksort($fruits);
foreach ($fruits as $key => $val) {
    print($key, " = ", $val, "\n");
}
print("---\n");
$fruits = ["d"=>"lemon", "a"=>"orange", "b"=>"banana", "c"=>"apple"];
krsort($fruits);
foreach ($fruits as $key => $val) {
    print($key, " = ", $val, "\n");
}
print("---\n");
$fruits = ["d" => "lemon", "a" => "orange", "b" => "banana", "c" => "apple"];
asort($fruits);
foreach ($fruits as $key => $val) {
    print($key, " = ", $val, "\n");
}
print("---\n");
$fruits = ["d" => "lemon", "a" => "orange", "b" => "banana", "c" => "apple"];
arsort($fruits);
foreach ($fruits as $key => $val) {
    print($key, " = ", $val, "\n");
}
print(pwd() . "\n");

print(date("l jS \of F Y h:i:s A", 0), LX_EOL);

print($argc . "\n");
print(count($argv) . "\n");

$fruits = ["d" => "lemon", "a" => "orange", "b" => "banana", "c" => "apple"];
$str = "fruit: ${fruits[\"d\"]}\n";
print($str);
$a = "a";
$a = $a;
print("$a\n");

$a = 'b';
$b = 'c';
$c = $$a;
print("$c\n");

print(__LINE__ . "\n");
print("${__FILE__}\n");
print(__DIR__ . "\n");
print(__FUNCTION__ . "\n");

function f() {
    return ['a', 'b', 3];
}

[$a, $b, $c] = f();
print("$a\n");
print("$b\n");
print("$c\n");

$json = "{\"a\":1}";
if (is_json($json)) {
    print_r(json_decode($json));
}

$a = 1;
$b = 2;
print( $a + $b . "px\n" );

function walk_tree($path, $prefix = "") {
    if (!ends_with($path, "/")) $path = $path . "/";

    $files = list_dir($path);
    foreach ($files as $file) {
        $full = $path . $file;

        if (is_dir($full)) {
            print($prefix . "├─ " . $file . "/" . LX_EOL);
            walk_tree($full, $prefix . "│  ");
        } else {
            print($prefix . "├─ " . $file . LX_EOL);
        }
    }
}

walk_tree("./tests");

$str = "Ça me fait peur de fêter noël là, sur cette île bizarroïde où une mère et sa môme essaient de me tuer avec un gâteau à la cigüe brûlé.";

$len = glyph_count($str);
for ($i = 0; $i < $len; $i++) {
    print(glyph_at($str, $i) . "|");
}
print(LX_EOL);

/* Will output:
Ç|a| |m|e| |f|a|i|t| |p|e|u|r| |d|e| |f|ê|t|e|r| |n|o|ë|l| |l|à|,| |s|u|r| |c|e|t|t|e| |î|l|e| |b|i|z|a|r|r|o|ï|d|e| |o|ù| |u|n|e| |m|è|r|e| |e|t| |s|a| |m|ô|m|e| |e|s|s|a|i|e|n|t| |d|e| |m|e| |t|u|e|r| |a|v|e|c| |u|n| |g|â|t|e|a|u| |à| |l|a| |c|i|g|ü|e| |b|r|û|l|é|.|
*/

$str = "Ça me fait peur de fêter noël là, sur cette île bizarroïde où une mère et sa môme essaient de me tuer avec un gâteau à la cigüe brûlé.";

$len = glyph_count($str);
for ($i = 0; $i < $len; $i++) {
    $chars = glyph_at($str, $i);
    print("0x");
    foreach($chars as $char) printf("%x", ord($char));
    print("|");
}
print(LX_EOL);

/* Will output:
0xc387|0x61|0x20|0x6d|0x65|0x20|0x66|0x61|0x69|0x74|0x20|0x70|0x65|0x75|0x72|0x20|0x64|0x65|0x20|0x66|0xc3aa|0x74|0x65|0x72|0x20|0x6e|0x6f|0xc3ab|0x6c|0x20|0x6c|0xc3a0|0x2c|0x20|0x73|0x75|0x72|0x20|0x63|0x65|0x74|0x74|0x65|0x20|0xc3ae|0x6c|0x65|0x20|0x62|0x69|0x7a|0x61|0x72|0x72|0x6f|0xc3af|0x64|0x65|0x20|0x6f|0xc3b9|0x20|0x75|0x6e|0x65|0x20|0x6d|0xc3a8|0x72|0x65|0x20|0x65|0x74|0x20|0x73|0x61|0x20|0x6d|0xc3b4|0x6d|0x65|0x20|0x65|0x73|0x73|0x61|0x69|0x65|0x6e|0x74|0x20|0x64|0x65|0x20|0x6d|0x65|0x20|0x74|0x75|0x65|0x72|0x20|0x61|0x76|0x65|0x63|0x20|0x75|0x6e|0x20|0x67|0xc3a2|0x74|0x65|0x61|0x75|0x20|0xc3a0|0x20|0x6c|0x61|0x20|0x63|0x69|0x67|0xc3bc|0x65|0x20|0x62|0x72|0xc3bb|0x6c|0xc3a9|0x2e|
*/

$x = "ok\n";
$name["x"] = 'x';
print($$name['x']);

print ($($name["x"]));